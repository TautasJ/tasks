\documentclass{boi2014}

\usepackage{enumitem}
\usepackage{todonotes}
\usepackage{wrapfig}
\usepackage{mathtools}
\usepackage{tikz}
%\usepackage{pgfmath}

\renewcommand{\DayNum}{1}
\renewcommand{\TaskCode}{coprobber}
\renewcommand{\TaskName}{The Cop and the Robber}

\renewcommand{\labelitemii}{$\circ$}
\newcommand{\param}[1]{{\tt #1}}
\newcommand{\method}[1]{{\tt #1}}
\newcommand{\constant}[1]{{\tt #1}}

\begin{document}
    Crime level in the city of Bytemore is hitting an all--time high.
    Among other misdemeanours, robberies are happening every day.
    And when the crime is committed, it is always up to a lone patrolling
    police officer to chase down the robber through the narrow alleys
    that connect street corners (commonly referred to simply as
    \emph{corners}). Unfortunately, more often than not, robbers escape
    their pursuers, because they know the city much better than
    the police.

    The Bytemore City Police Department (BCPD) is organising a summit
    to reduce crime. One of the initiatives is to use computer aid when
    pursuing the robbers. For this purpose, the BCPD has made a precise
    map of the city. Now they need computer software to find chasing
    strategies.

    The pursuit problem of one officer chasing one robber is modelled
    as follows:
    \begin{enumerate}
        \item The police officer chooses a corner on which to patrol.
        \item The robber then chooses a corner for the robbery
            (he knows where the officer is). From this moment on it
            is always assumed that both the officer and the robber
            know where each other is.
        \item The police officer's move consists of him moving to a
            neighbouring corner (i.e. one that is connected to the
            current one by an alley) or waiting (i.e. not moving).
        \item The robber's move consists of him moving to a neighbouring
            corner. Note that, unlike the police, robbers cannot wait.
            It is in their instinct to keep running.
        \item The police officer and the robber keep making moves one after
        another (starting with the officer) until one of the following
        happens:
        \begin{enumerate}
            \item situation repeats itself (situation is defined
                by the positions of both agents and the side whose turn
                it is to move next). This corresponds to the robber being
                able to avoid the police officer indefinitely, so the
                robber escapes;
            \item both agents meet on the same corner after a move of
                either of them. In this case the police officer catches
                the robber.
        \end{enumerate}
    \end{enumerate}

    \Task
    You have to write a program which, given the map of the city,
    would determine whether catching the robber is possible, and if it is,
    would catch him by making moves on behalf of the police officer.

    Your program must assume that the robber moves optimally.

    \Implementation
    You need to implement two functions:
    \begin{itemize}
        \item \method{start(N, A)} which takes the following parameters:
            \begin{itemize}
                \item $N$ --- the number of corners (corners are labelled
                    from $0$ to $N-1$);
                \item $A$ --- a two--dimensional array that describes the
                    alleys: for $0 \le i, j \le N-1$,
                    $$
                        A[i, j] \text{ is }
                        \begin{dcases*}
                            \texttt{false} & if $i$ and $j$ are not joined by any alley
                                \\
                            \texttt{true} & if $i$ and $j$ are joined by an alley
                        \end{dcases*}
                    $$
                    There will be no alleys connecting a corner to itself (i.e. $A[i, i]$
                    will be \texttt{false} for all $i$ values) and it will always be possible
                    to reach any corner from any other corner by moving along the alleys.
            \end{itemize}

        If it is possible to catch the robber on the map described
        by the parameters, function \method{start} has to return the
        label of the corner on which the police officer chooses to patrol.
        Otherwise, it has to return $-1$.

        \item \method{nextMove(R)} which takes as a
            parameter the label $R$ of the current corner of the robber
            and must return the label of the corner where the officer
            will be after his move.
    \end{itemize}

    Function \method{start} will be called exactly once before any
    calls to \method{nextMove} are made. If \method{start} returns
    $-1$, then \method{nextMove} will not be called. Otherwise,
    \method{nextMove} will be called repeatedly until the pursuit ends.
    More precisely, the program will terminate as soon as one of the
    following happens:
    \begin{itemize}
        \item \method{nextMove} returns an invalid move;
        \item the situation repeats itself;
        \item the robber is caught.
    \end{itemize}

    \Example
    \todo{Provide an example.}

    \Scoring
    In order to score full points, your solution must:
    \begin{enumerate}
    	\item correctly determine whether the police officer can catch
    		the robber;
	\item successfully catch the robber by making moves on behalf
		of the police officer.
    \end{enumerate}
    
    However, in subtasks 3 and 4, solutions that only implement the
    first requirement will score 30\% subtask points. 

    \begin{description}
        \item[Subtask 1 (15 points):] $N \le 500$. There will be exactly one path between every pair of corners.
        \item[Subtask 2 (15 points):] $N \le 500$. The network of corners and alleys will form a grid-shaped structure. The grid will have at least two rows and columns and the street corner labelling will follow the pattern shown in Figure \ref{fig:grid}.
        \begin{figure}
           \centering
           \begin{tikzpicture}
           	\draw (0,0) grid (3,2);
           	\foreach \x in {0,1,2,3} \foreach \y in {0,1,2}
           		\draw (\x,\y) node[circle,draw,fill=white,inner sep=0,minimum size=0.7cm] {\pgfmathparse{int(8-4*\y+\x)}\pgfmathresult};
           \end{tikzpicture}
           \caption{Grid network with 3 rows and 4 columns (Subtask 2)} \label{fig:grid}
	\end{figure}
        \item[Subtask 3 (30 points):] $N \le 100$.
        \item[Subtask 4 (40 points):] $N \le 500$.
    \end{description}

    \Constraints
    
    $2 \le N$
    
    \begin{description}
        \item[Time limit:] 1 s.
        \item[Memory limit:] 256 MB.
    \end{description}

    \todo{Need to add info about graders.}
\end{document}

